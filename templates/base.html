<!DOCTYPE html>
<html lang="pt-br" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Entre Linhas — Desabafos Anônimos{% endblock %}</title>

  <!-- Google Fonts: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
          },
          animation: {
            'fade-in-down': 'fadeInDown 0.5s ease-out',
            'fade-slide-up': 'fadeSlideUp 0.6s ease-out',
            'scale-up': 'scaleUp 0.3s ease-out',
            'glow': 'glow 1.5s ease-in-out infinite alternate',
          },
          keyframes: {
            fadeInDown: {
              '0%': { opacity: '0', transform: 'translateY(-10px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            fadeSlideUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            scaleUp: {
              '0%': { transform: 'scale(0.95)' },
              '100%': { transform: 'scale(1)' },
            },
            glow: {
              '0%': { boxShadow: '0 0 5px rgba(66, 153, 225, 0.5)' },
              '100%': { boxShadow: '0 0 20px rgba(66, 153, 225, 0.8)' },
            },
          },
        },
      },
    };
  </script>
  
  <!-- CSS Personalizado -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}" />
  
  {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-gray-100 font-sans flex flex-col">

  <!-- Navegação -->
  <nav class="bg-white dark:bg-gray-800 shadow-md py-4">
    <div class="container mx-auto px-6 flex flex-col md:flex-row md:justify-between md:items-center">
      <div class="flex justify-between items-center">
        <a href="{{ url_for('main.home') }}" class="flex items-center space-x-3 text-2xl font-bold text-gray-800 dark:text-white hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">
          <img src="{{ url_for('static', filename='images/logo.png') }}" alt="EntreLinhas" class="h-8 w-auto">
          <span class="text-lg font-semibold">EntreLinhas</span>
        </a>
        
        <!-- Botão de menu mobile -->
        <div class="md:hidden flex items-center">
          <!-- Botão de alternância de tema (mobile) -->
          <button 
            id="theme-toggle-mobile" 
            class="p-2 mr-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition duration-300 focus:outline-none"
            aria-label="Alternar tema claro/escuro"
          >
            <span id="theme-toggle-icon-mobile" class="block w-5 h-5">
              <!-- O ícone será inserido via JavaScript -->
            </span>
          </button>
          
          <button type="button" id="mobile-menu-button" class="text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:text-gray-600 dark:focus:text-gray-300" aria-label="toggle menu">
            <svg viewBox="0 0 24 24" class="h-6 w-6 fill-current">
              <path fill-rule="evenodd" d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path>
            </svg>
          </button>
        </div>
      </div>
      
      <!-- Barra de pesquisa -->
      <div class="hidden md:block md:w-1/3 mx-4">
        <form action="{{ url_for('search.pesquisar') }}" method="get" class="relative">
          <input 
            type="text" 
            name="q" 
            placeholder="Pesquisar desabafos..." 
            class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500"
          >
          <button 
            type="submit" 
            class="absolute right-0 top-0 h-full px-4 text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
            </svg>
          </button>
        </form>
      </div>
      
      <div id="mobile-menu" class="md:flex flex-col md:flex-row md:items-center md:mx-6 mt-4 md:mt-0 hidden">
        <a href="{{ url_for('main.home') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Início</a>
        <a href="{{ url_for('posts.feed') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Desabafos</a>
        <a href="{{ url_for('search.pesquisar') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300 md:hidden">Pesquisar</a>
        <a href="{{ url_for('stats.estatisticas') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Estatísticas</a>
        <a href="{{ url_for('profile.ver_perfil') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Meu Perfil</a>
        <a href="{{ url_for('main.about') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Sobre</a>
        <a href="{{ url_for('main.how_it_works') }}" class="my-1 md:my-0 md:mx-4 text-sm text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Como Funciona</a>
        
        <!-- Botão de alternância de tema (desktop) -->
        <button 
          id="theme-toggle" 
          class="hidden md:block md:ml-4 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition duration-300 focus:outline-none"
          aria-label="Alternar tema claro/escuro"
        >
          <span id="theme-toggle-icon" class="block w-5 h-5">
            <!-- O ícone será inserido via JavaScript -->
          </span>
        </button>
      </div>
    </div>
  </nav>

  <!-- Conteúdo Principal -->
  <main class="flex-grow">
    {% block content %}{% endblock %}
  </main>

  <!-- Rodapé -->
  <footer class="bg-white dark:bg-gray-800 py-6 mt-12">
    <div class="container mx-auto px-6">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="text-center md:text-left mb-4 md:mb-0">
          <p class="text-sm text-gray-600 dark:text-gray-400">&copy; 2025 Entre Linhas. Todos os direitos reservados.</p>
        </div>
        <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 text-center md:text-left">
          <a href="{{ url_for('main.home') }}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Início</a>
          <a href="{{ url_for('posts.feed') }}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Desabafos</a>
          <a href="{{ url_for('stats.estatisticas') }}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Estatísticas</a>
          <a href="{{ url_for('profile.ver_perfil') }}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Meu Perfil</a>
          <a href="{{ url_for('main.about') }}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Sobre</a>
          <a href="{{ url_for('main.how_it_works') }}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300">Como Funciona</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  <script>
    // Menu mobile
    document.addEventListener('DOMContentLoaded', function() {
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', function() {
          mobileMenu.classList.toggle('hidden');
        });
      }
      
      // Sincronizar botões de tema mobile e desktop
      const themeToggleMobile = document.getElementById('theme-toggle-mobile');
      const themeToggle = document.getElementById('theme-toggle');
      const themeToggleIconMobile = document.getElementById('theme-toggle-icon-mobile');
      
      if (themeToggleMobile && themeToggle) {
        themeToggleMobile.addEventListener('click', function() {
          // Simular clique no botão desktop para manter a lógica em um só lugar
          themeToggle.click();
          
          // Copiar o conteúdo do ícone desktop para o mobile
          if (themeToggleIconMobile) {
            themeToggleIconMobile.innerHTML = document.getElementById('theme-toggle-icon').innerHTML;
          }
        });
      }
    });
  </script>
  {% block extra_scripts %}{% endblock %}
</body>
</html>

